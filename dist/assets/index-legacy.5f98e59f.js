var __vite_style__=document.createElement("style");__vite_style__.innerHTML="*{padding:0;margin:0;box-sizing:border-box}body,html{min-height:100vh}html{background-color:#f9f9f9}#app{font-family:ST heiti,Avenir,Helvetica,Arial,sans-serif;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;margin-top:60px}body{padding-top:40px}li,ul{list-style:none}.flex{display:flex}.flex-1{flex:1}.title{font-size:28px;text-align:center}.guard-face{display:inline-block;width:32px;height:32px;background-position:0 0;background-size:contain;background-repeat:no-repeat;border-radius:50%;margin-right:10px}.moni{width:800px;height:600px;margin:auto;padding:20px;background-color:#fff;border-radius:4px;box-shadow:0 3px 4px 4px #eee;display:flex}.guard-title{height:30px;line-height:30px}.guard-list{width:300px;height:530px;border-right:1px solid #ccc;overflow-y:auto}.guard-item{display:flex;align-items:center;padding:3px 0;color:#999}.guard-item.alive{color:#000}.guard-item p span{color:#999}.no-scrollbar::-webkit-scrollbar,.no-scrollbar::-webkit-scrollbar-thumb{width:0;height:0;background-color:transparent}.btn-reload{padding:4px 10px;margin-right:20px;border:none;background-color:#10b981;color:#fff;border-radius:4px;outline:0;cursor:pointer}.container{height:300px;align-items:center;justify-content:center}.container img{width:128px;height:128px}.container p{font-size:24px;font-weight:500}.btn-mua{width:80%;padding:6px 0;margin-left:10%;border:none;background-color:#10b981;color:#fff;border-radius:4px;outline:0;cursor:pointer;font-size:20px;transition:all .3s}.btn-mua:active{background-color:#059669}.rank-title{padding-top:20px;text-align:center}.rank-list{padding:20px;width:100%;height:150px;overflow-y:auto}.rank-list li{align-items:center;padding:3px 0;font-weight:500}.rank-list li p{flex:1;justify-content:space-between}.rank-list li p span{display:inline-block}",document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.809dbf25.js"],(function(){"use strict";var e,a,t,n,r,i,l,o,s,u,c,d,p;return{setters:[function(g){e=g.D,a=g.r,t=g.d,n=g.o,r=g.c,i=g.a,l=g.t,o=g.b,s=g.F,u=g.e,c=g.f,d=g.g,p=g.h}],execute:function(){const g=e.create({baseURL:"https://json2jsonp.com"});g.interceptors.response.use((e=>{const a=e.data;return JSON.parse(a.replace(/^_(?:_jsonp)?\((.*)\)$/,"$1"))}));function f(){const e=a([]),t=a(0);let n=1,r=[];return{guardNum:t,guardList:e,getGuardList:async function a(i=!1){const{code:l,data:o}=await(async(e=1,a=!1)=>{const t=a?`&t=${Date.now()}`:"";return await g.get("",{params:{url:`https://api.live.bilibili.com/guard/topList?roomid=23001181&ruid=1589117610&page=${e}${t}`,callback:"_"}})})(n,i);if(0!==l)return;const{info:s,list:u}=o;if(n===s.page)return e.value=[...r.filter((e=>1===e.is_alive)),...r.filter((e=>0===e.is_alive))],void(n=1);r=[...r,...u],t.value=s.num,n++,await a(i)},getRandomGuard:function(){const a=Math.floor(Math.random()*(e.value.length-1));return e.value[a]}}}const m=window.localStorage,h={get(e){try{const a=m.getItem(e);return a?JSON.parse(a):""}catch{return""}},set(e,a){m.setItem(e,JSON.stringify(a))}};var v=t({name:"App",setup(){const{guardNum:e,guardList:t,getGuardList:r,getRandomGuard:i}=f(),l=a(!1),o=async(e=!0)=>{l.value||(l.value=!0,t.value=[],await r(e),l.value=!1)};n((async()=>{await o(!1)}));const s=a({}),u=a(!1),c=a([]);let d;c.value=h.get("moni/rank/mua")||[];return{loading:l,guardNum:e,guardList:t,onRefresh:o,currentGuard:s,onMua:()=>{if(!l.value)if(u.value)u.value=!1,d&&clearInterval(d);else{u.value=!0,s.value=i();const e=c.value.findIndex((e=>e.uid===s.value.uid));-1===e?c.value.push({...s.value,count:1}):c.value[e].count=c.value[e].count+1,c.value=c.value.sort(((e,a)=>e.count-a.count)),h.set("moni/rank/mua",c.value.map((({uid:e,username:a,face:t,count:n,is_alive:r})=>({uid:e,username:a,face:t,count:n,is_alive:r})))),d=setInterval((()=>{s.value=i()}),10)}},rankList:c}}});const x={class:"moni"},b={class:"guard-container"},y={class:"flex"},k={class:"guard-title flex-1"},_={class:"guard-list no-scrollbar"},w={key:0},G={class:"flex-1"},L=i("h3",{class:"title"},"朝海沫霓Moni Mua~",-1),M={key:0,class:"container flex"},S=i("h3",{class:"rank-title"},"刀了榜",-1),N={class:"rank-list no-scrollbar"},R={class:"flex"},j={class:"flex-1"};v.render=function(e,a,t,n,p,g){return d(),r("div",x,[i("div",b,[i("div",y,[i("h3",k," 舰长总数： "+l(e.guardNum),1),i("button",{class:"btn-reload",onClick:a[1]||(a[1]=(...a)=>e.onRefresh&&e.onRefresh(...a))},"刷新")]),i("ul",_,[e.loading?(d(),r("li",w," 获取舰长数据中... ")):o("",!0),(d(!0),r(s,null,u(e.guardList,(e=>(d(),r("li",{key:e.uid,class:["guard-item",e.is_alive?"alive":""]},[i("img",{class:"guard-face",src:e.face+"@128w_128h",alt:""},null,8,["src"]),i("p",null,[i("span",null,l(e.is_alive?"[在线]":""),1),c(" "+l(e.username),1)])],2)))),128))])]),i("div",G,[L,e.currentGuard&&e.currentGuard.uid?(d(),r("div",M,[e.currentGuard.face?(d(),r("img",{key:0,class:"guard-face",src:e.currentGuard.face+"@128w_128h",alt:""},null,8,["src"])):o("",!0),i("p",null,[i("span",null,l(e.currentGuard.is_alive?"[在线]":"[不在]"),1),c(" "+l(e.currentGuard.username),1)])])):o("",!0),i("div",null,[i("button",{class:"btn-mua",onClick:a[2]||(a[2]=(...a)=>e.onMua&&e.onMua(...a))},"Mua~")]),S,i("ul",N,[(d(!0),r(s,null,u(e.rankList,(e=>(d(),r("li",{key:e.uid,class:"flex"},[i("img",{class:"guard-face",src:e.face+"@128w_128h",alt:""},null,8,["src"]),i("p",R,[i("span",j,l(e.username),1),i("span",null,l(e.count)+" 次",1)])])))),128))])])])},p(v).mount("#app")}}}));
